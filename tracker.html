<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Team Productivity Dashboard</title>
    <!-- Import Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Import React and ReactDOM from CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Import Babel to transpile JSX code in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Custom font and base styling for a clean look */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #374151;
        }
        /* Style for the input fields */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
            width: 50px; /* Set a fixed width for the number inputs */
            text-align: center;
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.25rem;
        }
        input[type="number"]:focus {
            outline: none;
            border-color: #6366f1; /* ring-indigo-500 */
            box-shadow: 0 0 0 1px #6366f1;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { createRoot } = ReactDOM;

        // The main App component that contains the entire dashboard.
        const App = () => {
            // Define the initial state for the team members and their case data.
            // This data is now editable via the UI.
            const [teamData, setTeamData] = useState([
                { id: 1, name: 'Michael', cases: { 'New Case Opened + Hubble': 10, 'Waiting': 2, 'Pushed Back to FP': 3, 'Fraud Review Excelsior': 5, 'POA Legacy / Non Legacy Excelsior': 2, 'Follow-up with Fraud Team / FP': 1, 'Case Closed': 8 } },
                { id: 2, name: 'Jessica', cases: { 'New Case Opened + Hubble': 8, 'Waiting': 0, 'Pushed Back to FP': 2, 'Fraud Review Excelsior': 6, 'POA Legacy / Non Legacy Excelsior': 1, 'Follow-up with Fraud Team / FP': 2, 'Case Closed': 10 } },
                { id: 3, name: 'Chris', cases: { 'New Case Opened + Hubble': 12, 'Waiting': 1, 'Pushed Back to FP': 4, 'Fraud Review Excelsior': 3, 'POA Legacy / Non Legacy Excelsior': 3, 'Follow-up with Fraud Team / FP': 0, 'Case Closed': 7 } },
                { id: 4, name: 'Sarah', cases: { 'New Case Opened + Hubble': 9, 'Waiting': 0, 'Pushed Back to FP': 1, 'Fraud Review Excelsior': 5, 'POA Legacy / Non Legacy Excelsior': 2, 'Follow-up with Fraud Team / FP': 3, 'Case Closed': 9 } },
                { id: 5, name: 'David', cases: { 'New Case Opened + Hubble': 7, 'Waiting': 0, 'Pushed Back to FP': 2, 'Fraud Review Excelsior': 4, 'POA Legacy / Non Legacy Excelsior': 1, 'Follow-up with Fraud Team / FP': 1, 'Case Closed': 6 } },
            ]);

            // Handles changes to the number input fields and updates the state.
            const handleCaseChange = (memberId, section, value) => {
                const newTeamData = teamData.map(member => {
                    if (member.id === memberId) {
                        return {
                            ...member,
                            cases: {
                                ...member.cases,
                                [section]: value,
                            },
                        };
                    }
                    return member;
                });
                setTeamData(newTeamData);
            };

            // A helper function to calculate the points for a given team member.
            const calculatePoints = (cases) => {
                // Check if there are any cases in the 'Waiting' section.
                if (cases['Waiting'] > 0) {
                    return 0; // If there are, return 0 points as per the rule.
                }

                // Otherwise, sum up the points from all other sections.
                const sections = Object.keys(cases).filter(section => section !== 'Waiting');
                let totalPoints = 0;
                sections.forEach(section => {
                    totalPoints += cases[section];
                });

                return totalPoints;
            };

            const caseSections = Object.keys(teamData[0].cases);

            // The main component render.
            return (
                <div className="min-h-screen p-4 md:p-8">
                    <div className="container mx-auto">
                        <div className="bg-white rounded-xl shadow-lg p-6 md:p-10">
                            <h1 className="text-3xl md:text-4xl font-extrabold text-gray-900 text-center mb-2">
                                Team Productivity Dashboard
                            </h1>
                            <p className="text-sm md:text-base text-gray-500 text-center mb-8">
                                Enter case counts below and see the points update in real-time.
                            </p>

                            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8">
                                {teamData.map(member => (
                                    <div
                                        key={member.id}
                                        className={`flex flex-col items-center justify-center p-6 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105
                                          ${calculatePoints(member.cases) === 0 ? 'bg-red-50 ring-2 ring-red-400' : 'bg-green-50 ring-2 ring-green-400'}`}
                                    >
                                        <div className="p-3 bg-white rounded-full mb-3 shadow-sm">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-user w-8 h-8 text-indigo-600"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                        </div>
                                        <h2 className="text-lg font-semibold text-gray-800">{member.name}</h2>
                                        <div className="mt-2 text-2xl font-bold text-gray-900">
                                            {calculatePoints(member.cases)} <span className="text-base font-medium text-gray-500">points</span>
                                        </div>
                                        {member.cases.Waiting > 0 && (
                                            <div className="mt-2 text-red-600 text-sm font-medium flex items-center">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-clock w-4 h-4 mr-1"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                                                Waiting status detected
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="mt-8 bg-white rounded-xl shadow-lg p-6 md:p-8">
                            <h2 className="text-2xl font-bold text-gray-900 mb-6 text-center">
                                Detailed Case Counts (Editable)
                            </h2>
                            <div className="overflow-x-auto">
                                <table className="min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden">
                                    <thead className="bg-gray-50">
                                        <tr>
                                            <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Member</th>
                                            {caseSections.map(section => (
                                                <th key={section} scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    {section.replace('New Case Opened + Hubble', 'New Case').replace('Pushed Back to FP', 'Pushed Back').replace('Fraud Review Excelsior', 'Fraud Review').replace('POA Legacy / Non Legacy Excelsior', 'POA Legacy').replace('Follow-up with Fraud Team / FP', 'Follow-up').replace('Case Closed', 'Closed')}
                                                </th>
                                            ))}
                                        </tr>
                                    </thead>
                                    <tbody className="bg-white divide-y divide-gray-200">
                                        {teamData.map(member => (
                                            <tr key={member.id}>
                                                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{member.name}</td>
                                                {caseSections.map(section => (
                                                    <td key={section} className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                        <input
                                                            type="number"
                                                            value={member.cases[section]}
                                                            onChange={(e) => handleCaseChange(member.id, section, parseInt(e.target.value) || 0)}
                                                            min="0"
                                                        />
                                                    </td>
                                                ))}
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Render the App component to the root element.
        const root = createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>
</html>
